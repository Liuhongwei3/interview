物理层
数据链路层
网络层
传输层
会话层
表示层
应用层

## 物理层
中继器
集线器

## 数据链路层
ARP
交换机
网桥

## 网络层
IP
ICMP

## 传输层
> 拥塞控制 --- 当网络出现拥塞的时候，TCP能够减小向网络注入数据的速率和数量，缓解拥塞
> 全双工通信 --- 在通信的任意时刻，线路上存在A到B和B到A的双向信号传输,允许数据同时在两个方向上传输，即通信的双方可以同时发送和接收数据。

- UDP
	- 面向无连接（不需要握手）
	- 单播，多播，广播
	- 面向报文（加入首部后便下发给 IP 网络层）
	- 不可靠（没有拥塞控制，一直以恒定的速度发送数据）.
	- 开销小（报文中除了端口号、报文、校验和 无其他额外信息）（首部仅 8 字节）
- TCP
	- 面向连接（三次握手(SYN-SYN/ACK-ACK)，四次挥手(FIN-ACK-FIN-ACK)）
	- 单播（1v1）
	- 面向字节流（在不保留报文边界的情况下以字节流方式进行传输）
	- 可靠（有拥塞控制，序号、确认序号，重传---如果一定时间未收到确认则重传）
	- 开销稍大（首部最小 20 字节，最大 60 字节）
	- 支持全双工

## 应用层
HTTP
DNS
SSH
FTP
smtp(邮件传输)
无连接传输： snmp dhcp

- HTTP(无状态，可靠传输)
	- 1.0
		- 任意格式内容
		- GET/POST/HEAD
		- 不支持断点续传(一次性传完).
		- 一台计算机一个 IP
	- 1.1
		- 长连接 --- Connection: keep-alive
		- 管道化 --- 一个 TCP 传输多个请求
		- 缓存处理 --- cache-control: public(browser+proxy)/private(browser)/no-cache(不强缓存)/max-age(过期时间)/no-store
		- add PUT/PATCH/OPTIONS/DELETE
		- add "E-tag，If-Unmodified-Since, If-Match, If-None-Match" 等缓存控制标头来控制缓存失效
		- 支持断点续传 --- Range
		- 使用了虚拟网络，在一台物理服务器上可以存在多个虚拟主机，并且它们共享一个IP地址。

		- 问题：
			- 安全性 --- 在传输数据过程中，所有内容都是明文，客户端和服务器端都无法验证对方的身份，无法保证数据的安全性。
			- 队头阻塞 --- 虽然默认允许复用TCP连接，但是在同一个TCP连接里，所有数据通信是按次序进行的，服务器通常在处理完一个回应后，才会继续去处理下一个，这样子就会造成队头阻塞。
			- 性能 --- 支持Keep-alive，用此方案来弥补创建多次连接产生的延迟，但是同样会给服务器带来压力，并且的话，对于单文件被不断请求的服务，Keep-alive会极大影响性能，因为它在文件被请求之后还保持了不必要的连接很长时间。
	- 2.0
		- 二进制分帧 --- 二进制格式(01串)传输，一个报文格式就被拆分为一个个二进制帧，用「Headers帧」存放头部字段，「Data帧」存放请求体数据。这样就是一堆乱序的二进制帧，它们不存在先后关系，因此不需要排队等待，解决了队头阻塞问题。
		- 首部压缩 --- 传索引（根据索引在 header 索引表中查询对应信息）
		- 多路复用 --- 同域名下所有通信都在单个连接上完成，单个连接可以承载任意数量的双向数据流。
		- 服务器推送 --- 浏览器发送一个请求，服务器主动向浏览器推送与这个请求相关的资源，这样浏览器就不用发起后续请求。

	- 常见状态码
		- 100 --- 请求在处理

		- 200 --- OK
		- 204 --- No Content

		- 301 --- 永久重定向
		- 302 --- 临时重定向
		- 304 --- not modified

		- 400 --- bad request
		- 401 --- unauthorized
		- 403 --- forbidden
		- 404 --- not found

		- 500 --- server error
		- 502 --- bad gateway
		- 503 --- service available

## 缓存
- 强缓存 --- Cache-control(1.1+)/Expires(1.0)
	- 命中 --- public/private,max-age 未过期 --- 读缓存
	- 未命中（过期、no-cache），去协商缓存 --- 发起请求

> 当 Expires 和 Cache-Control 同时存在时，优先考虑 Cache-Control。

- 协商缓存 --- ETag、Last-Modified --- If-None-Match、If-Modified-Since
	- 命中 --- 强缓存未命中条件 --- do request
		- 304（读缓存但还是会返回 header 信息，因为命中协商缓存就发送请求） --- ETag or Last-Modified 未改变
		- 200（获取最新资源）--- 更新上面两个值